# -*- coding: utf-8 mode: shell-script -*-

Test       : Electronic subsystem propagators in multisystem mode
Program    : octopus
TestGroups : short-run, real_time
Enabled    : Yes

# This test checks the restart for electrons

# ground state
Input      : 15-electronic_system_restart.01-gs.inp
Precision  : 4e-08
match ; SCF convergence ; GREPCOUNT(static/info, 'SCF converged') ; 1
Precision: 5.30e-07
match ;    Initial energy    ; GREPFIELD(static/info, 'Total       =', 3) ; -10.6068424

# the values below for the restarted tests need to be exactly the same as here to make sure
# the restart works properly
Input      : 15-electronic_system_restart.02-td_full.inp
Precision: 5.30e-14
match ;  Energy [step  0]  ; LINEFIELD(test_electrons/td.general/energy, -21, 3) ; -10.6068424020538
Precision: 5.30e-13
match ;  Energy [step 20]  ; LINEFIELD(test_electrons/td.general/energy, -1, 3) ; -10.6063498271686
Precision: 3.93e-15
match ;  Multipoles [step  0]  ; LINEFIELD(test_electrons/td.general/multipoles, -21, 4) ; 6.744248104320451e-16
Precision: 6.14e-15
match ;  Multipoles [step 20]  ; LINEFIELD(test_electrons/td.general/multipoles, -1, 4) ; -0.126551382331123

Input      : 15-electronic_system_restart.03-td_restart_part1.inp
Input      : 15-electronic_system_restart.04-td_restart_part2.inp
Precision: 5.30e-14
match ;  Energy [step  0]  ; LINEFIELD(test_electrons/td.general/energy, -21, 3) ; -10.6068424020538
Precision: 5.30e-13
match ;  Energy [step 20]  ; LINEFIELD(test_electrons/td.general/energy, -1, 3) ; -10.6063498271686
Precision: 3.93e-15
match ;  Multipoles [step  0]  ; LINEFIELD(test_electrons/td.general/multipoles, -21, 4) ; 6.744248104320451e-16
Precision: 6.14e-15
match ;  Multipoles [step 20]  ; LINEFIELD(test_electrons/td.general/multipoles, -1, 4) ; -0.126551382331123
